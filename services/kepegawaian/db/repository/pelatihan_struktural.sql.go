// Code generated by sqlc. DO NOT EDIT.
// source: pelatihan_struktural.sql

package repository

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const listPelatihanStruktural = `-- name: ListPelatihanStruktural :many
SELECT 
	rjd.jenis_diklat,
	rd.id,
	rd.nama_diklat,
	rd.institusi_penyelenggara,
	rd.no_sertifikat,
	rd.tanggal_mulai,
	rd.tanggal_selesai,
	rd.tahun_diklat,
	rd.durasi_jam
FROM 
	riwayat_diklat rd
JOIN 
	ref_jenis_diklat rjd ON rd.jenis_diklat_id = rjd.id
WHERE 
	rd.deleted_at IS NULL

AND rd.nip_baru = $1
`

type ListPelatihanStrukturalRow struct {
	JenisDiklat            pgtype.Text `db:"jenis_diklat"`
	ID                     int64       `db:"id"`
	NamaDiklat             pgtype.Text `db:"nama_diklat"`
	InstitusiPenyelenggara pgtype.Text `db:"institusi_penyelenggara"`
	NoSertifikat           pgtype.Text `db:"no_sertifikat"`
	TanggalMulai           pgtype.Date `db:"tanggal_mulai"`
	TanggalSelesai         pgtype.Date `db:"tanggal_selesai"`
	TahunDiklat            pgtype.Int2 `db:"tahun_diklat"`
	DurasiJam              pgtype.Int2 `db:"durasi_jam"`
}

func (q *Queries) ListPelatihanStruktural(ctx context.Context, nipBaru pgtype.Text) ([]ListPelatihanStrukturalRow, error) {
	rows, err := q.db.Query(ctx, listPelatihanStruktural, nipBaru)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ListPelatihanStrukturalRow
	for rows.Next() {
		var i ListPelatihanStrukturalRow
		if err := rows.Scan(
			&i.JenisDiklat,
			&i.ID,
			&i.NamaDiklat,
			&i.InstitusiPenyelenggara,
			&i.NoSertifikat,
			&i.TanggalMulai,
			&i.TanggalSelesai,
			&i.TahunDiklat,
			&i.DurasiJam,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
