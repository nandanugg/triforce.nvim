// Code generated by sqlc. DO NOT EDIT.
// source: pelatihan_fungsional.sql

package repository

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const countRiwayatDiklatFungsional = `-- name: CountRiwayatDiklatFungsional :one
SELECT COUNT(1) AS total
FROM riwayat_diklat_fungsional rf
WHERE rf.nip_baru = $1
  AND rf.deleted_at IS NULL
`

func (q *Queries) CountRiwayatDiklatFungsional(ctx context.Context, nipBaru pgtype.Text) (int64, error) {
	row := q.db.QueryRow(ctx, countRiwayatDiklatFungsional, nipBaru)
	var total int64
	err := row.Scan(&total)
	return total, err
}

const listRiwayatDiklatFungsional = `-- name: ListRiwayatDiklatFungsional :many
SELECT 
    rf.id,
    rf.jenis_diklat,
    rf.nama_kursus,
    rf.tanggal_kursus,
    rf.tahun,
    rf.institusi_penyelenggara,
    rf.no_sertifikat,
    rf.jumlah_jam
FROM riwayat_diklat_fungsional rf
WHERE rf.nip_baru = $1
AND rf.deleted_at IS NULL
ORDER BY rf."tahun" DESC
LIMIT $2 OFFSET $3
`

type ListRiwayatDiklatFungsionalParams struct {
	NipBaru pgtype.Text `db:"nip_baru"`
	Limit   int32       `db:"limit"`
	Offset  int32       `db:"offset"`
}

type ListRiwayatDiklatFungsionalRow struct {
	ID                     string      `db:"id"`
	JenisDiklat            pgtype.Text `db:"jenis_diklat"`
	NamaKursus             pgtype.Text `db:"nama_kursus"`
	TanggalKursus          pgtype.Date `db:"tanggal_kursus"`
	Tahun                  pgtype.Int2 `db:"tahun"`
	InstitusiPenyelenggara pgtype.Text `db:"institusi_penyelenggara"`
	NoSertifikat           pgtype.Text `db:"no_sertifikat"`
	JumlahJam              pgtype.Int4 `db:"jumlah_jam"`
}

func (q *Queries) ListRiwayatDiklatFungsional(ctx context.Context, arg ListRiwayatDiklatFungsionalParams) ([]ListRiwayatDiklatFungsionalRow, error) {
	rows, err := q.db.Query(ctx, listRiwayatDiklatFungsional, arg.NipBaru, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ListRiwayatDiklatFungsionalRow
	for rows.Next() {
		var i ListRiwayatDiklatFungsionalRow
		if err := rows.Scan(
			&i.ID,
			&i.JenisDiklat,
			&i.NamaKursus,
			&i.TanggalKursus,
			&i.Tahun,
			&i.InstitusiPenyelenggara,
			&i.NoSertifikat,
			&i.JumlahJam,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
