// Code generated by sqlc. DO NOT EDIT.
// source: pegawai.sql

package repository

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const getProfilePegawaiByPNSID = `-- name: GetProfilePegawaiByPNSID :one
select
  p.nip_lama,
  p.nip_baru,
  p.gelar_depan,
  p.gelar_belakang,
  p.nama,
  p.unor_id,
  rj.nama_jabatan as jabatan,
  rg.nama_pangkat as pangkat,
  case when rkh.is_pppk then rg.gol_pppk else rg.nama end as golongan
from pegawai p
left join ref_jabatan rj on rj.kode_jabatan = p.jabatan_instansi_id and rj.deleted_at is null
left join ref_golongan rg on rg.id = p.gol_id and rg.deleted_at is null
left join ref_kedudukan_hukum rkh on rkh.id = p.kedudukan_hukum_id and rkh.deleted_at is null
where pns_id = $1 and p.deleted_at is null
`

type GetProfilePegawaiByPNSIDRow struct {
	NipLama       pgtype.Text `db:"nip_lama"`
	NipBaru       pgtype.Text `db:"nip_baru"`
	GelarDepan    pgtype.Text `db:"gelar_depan"`
	GelarBelakang pgtype.Text `db:"gelar_belakang"`
	Nama          pgtype.Text `db:"nama"`
	UnorID        pgtype.Text `db:"unor_id"`
	Jabatan       pgtype.Text `db:"jabatan"`
	Pangkat       pgtype.Text `db:"pangkat"`
	Golongan      interface{} `db:"golongan"`
}

func (q *Queries) GetProfilePegawaiByPNSID(ctx context.Context, pnsID string) (GetProfilePegawaiByPNSIDRow, error) {
	row := q.db.QueryRow(ctx, getProfilePegawaiByPNSID, pnsID)
	var i GetProfilePegawaiByPNSIDRow
	err := row.Scan(
		&i.NipLama,
		&i.NipBaru,
		&i.GelarDepan,
		&i.GelarBelakang,
		&i.Nama,
		&i.UnorID,
		&i.Jabatan,
		&i.Pangkat,
		&i.Golongan,
	)
	return i, err
}
