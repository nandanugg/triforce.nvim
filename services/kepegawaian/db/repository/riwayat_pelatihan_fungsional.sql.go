// Code generated by sqlc. DO NOT EDIT.
// source: riwayat_pelatihan_fungsional.sql

package repository

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const countRiwayatPelatihanFungsional = `-- name: CountRiwayatPelatihanFungsional :one
SELECT COUNT(1) AS total
FROM riwayat_diklat_fungsional rf
WHERE rf.nip_baru = $1
  AND rf.deleted_at IS NULL
`

func (q *Queries) CountRiwayatPelatihanFungsional(ctx context.Context, nipBaru pgtype.Text) (int64, error) {
	row := q.db.QueryRow(ctx, countRiwayatPelatihanFungsional, nipBaru)
	var total int64
	err := row.Scan(&total)
	return total, err
}

const getBerkasRiwayatPelatihanFungsional = `-- name: GetBerkasRiwayatPelatihanFungsional :one
select file_base64 from riwayat_diklat_fungsional
where nip_baru = $1 and id = $2 and deleted_at is null
`

type GetBerkasRiwayatPelatihanFungsionalParams struct {
	NipBaru pgtype.Text `db:"nip_baru"`
	ID      string      `db:"id"`
}

func (q *Queries) GetBerkasRiwayatPelatihanFungsional(ctx context.Context, arg GetBerkasRiwayatPelatihanFungsionalParams) (pgtype.Text, error) {
	row := q.db.QueryRow(ctx, getBerkasRiwayatPelatihanFungsional, arg.NipBaru, arg.ID)
	var file_base64 pgtype.Text
	err := row.Scan(&file_base64)
	return file_base64, err
}

const listRiwayatPelatihanFungsional = `-- name: ListRiwayatPelatihanFungsional :many
SELECT
    rf.id,
    rf.jenis_diklat,
    rf.nama_kursus,
    rf.tanggal_kursus,
    rf.tahun,
    rf.institusi_penyelenggara,
    rf.no_sertifikat,
    rf.jumlah_jam
FROM riwayat_diklat_fungsional rf
WHERE rf.nip_baru = $1
AND rf.deleted_at IS NULL
ORDER BY rf."tahun" DESC
LIMIT $2 OFFSET $3
`

type ListRiwayatPelatihanFungsionalParams struct {
	NipBaru pgtype.Text `db:"nip_baru"`
	Limit   int32       `db:"limit"`
	Offset  int32       `db:"offset"`
}

type ListRiwayatPelatihanFungsionalRow struct {
	ID                     string      `db:"id"`
	JenisDiklat            pgtype.Text `db:"jenis_diklat"`
	NamaKursus             pgtype.Text `db:"nama_kursus"`
	TanggalKursus          pgtype.Date `db:"tanggal_kursus"`
	Tahun                  pgtype.Int2 `db:"tahun"`
	InstitusiPenyelenggara pgtype.Text `db:"institusi_penyelenggara"`
	NoSertifikat           pgtype.Text `db:"no_sertifikat"`
	JumlahJam              pgtype.Int4 `db:"jumlah_jam"`
}

func (q *Queries) ListRiwayatPelatihanFungsional(ctx context.Context, arg ListRiwayatPelatihanFungsionalParams) ([]ListRiwayatPelatihanFungsionalRow, error) {
	rows, err := q.db.Query(ctx, listRiwayatPelatihanFungsional, arg.NipBaru, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ListRiwayatPelatihanFungsionalRow
	for rows.Next() {
		var i ListRiwayatPelatihanFungsionalRow
		if err := rows.Scan(
			&i.ID,
			&i.JenisDiklat,
			&i.NamaKursus,
			&i.TanggalKursus,
			&i.Tahun,
			&i.InstitusiPenyelenggara,
			&i.NoSertifikat,
			&i.JumlahJam,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
