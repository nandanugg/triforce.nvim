// Code generated by sqlc. DO NOT EDIT.
// source: keluarga.sql

package repository

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createAnak = `-- name: CreateAnak :one
insert into anak
    (pasangan_id, nama, nik, jenis_kelamin, tanggal_lahir, agama_id, jenis_kawin_id, status_anak, status_sekolah, anak_ke, pns_id, nip) values
    ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12)
returning id
`

type CreateAnakParams struct {
	PasanganID    pgtype.Int8 `db:"pasangan_id"`
	Nama          pgtype.Text `db:"nama"`
	Nik           pgtype.Text `db:"nik"`
	JenisKelamin  pgtype.Text `db:"jenis_kelamin"`
	TanggalLahir  pgtype.Date `db:"tanggal_lahir"`
	AgamaID       pgtype.Int2 `db:"agama_id"`
	JenisKawinID  pgtype.Int2 `db:"jenis_kawin_id"`
	StatusAnak    pgtype.Text `db:"status_anak"`
	StatusSekolah pgtype.Int2 `db:"status_sekolah"`
	AnakKe        pgtype.Int2 `db:"anak_ke"`
	PnsID         pgtype.Text `db:"pns_id"`
	Nip           pgtype.Text `db:"nip"`
}

func (q *Queries) CreateAnak(ctx context.Context, arg CreateAnakParams) (int64, error) {
	row := q.db.QueryRow(ctx, createAnak,
		arg.PasanganID,
		arg.Nama,
		arg.Nik,
		arg.JenisKelamin,
		arg.TanggalLahir,
		arg.AgamaID,
		arg.JenisKawinID,
		arg.StatusAnak,
		arg.StatusSekolah,
		arg.AnakKe,
		arg.PnsID,
		arg.Nip,
	)
	var id int64
	err := row.Scan(&id)
	return id, err
}

const createOrangTua = `-- name: CreateOrangTua :one
insert into orang_tua
    (nama, jenis_dokumen, no_dokumen, hubungan, agama_id, tanggal_meninggal, akte_meninggal, pns_id, nip) values
    ($1, $2, $3, $4, $5, $6, $7, $8, $9)
returning id
`

type CreateOrangTuaParams struct {
	Nama             pgtype.Text `db:"nama"`
	JenisDokumen     pgtype.Text `db:"jenis_dokumen"`
	NoDokumen        pgtype.Text `db:"no_dokumen"`
	Hubungan         pgtype.Int2 `db:"hubungan"`
	AgamaID          pgtype.Int2 `db:"agama_id"`
	TanggalMeninggal pgtype.Date `db:"tanggal_meninggal"`
	AkteMeninggal    pgtype.Text `db:"akte_meninggal"`
	PnsID            pgtype.Text `db:"pns_id"`
	Nip              pgtype.Text `db:"nip"`
}

func (q *Queries) CreateOrangTua(ctx context.Context, arg CreateOrangTuaParams) (int32, error) {
	row := q.db.QueryRow(ctx, createOrangTua,
		arg.Nama,
		arg.JenisDokumen,
		arg.NoDokumen,
		arg.Hubungan,
		arg.AgamaID,
		arg.TanggalMeninggal,
		arg.AkteMeninggal,
		arg.PnsID,
		arg.Nip,
	)
	var id int32
	err := row.Scan(&id)
	return id, err
}

const createPasangan = `-- name: CreatePasangan :one
insert into pasangan
    (nama, nik, pns, tanggal_lahir, karsus, agama_id, status, hubungan, tanggal_menikah, akte_nikah, tanggal_meninggal, akte_meninggal, tanggal_cerai, akte_cerai, pns_id, nip) values
    ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16)
returning id
`

type CreatePasanganParams struct {
	Nama             pgtype.Text `db:"nama"`
	Nik              pgtype.Text `db:"nik"`
	Pns              pgtype.Int2 `db:"pns"`
	TanggalLahir     pgtype.Date `db:"tanggal_lahir"`
	Karsus           pgtype.Text `db:"karsus"`
	AgamaID          pgtype.Int2 `db:"agama_id"`
	Status           pgtype.Int2 `db:"status"`
	Hubungan         pgtype.Int2 `db:"hubungan"`
	TanggalMenikah   pgtype.Date `db:"tanggal_menikah"`
	AkteNikah        pgtype.Text `db:"akte_nikah"`
	TanggalMeninggal pgtype.Date `db:"tanggal_meninggal"`
	AkteMeninggal    pgtype.Text `db:"akte_meninggal"`
	TanggalCerai     pgtype.Date `db:"tanggal_cerai"`
	AkteCerai        pgtype.Text `db:"akte_cerai"`
	PnsID            pgtype.Text `db:"pns_id"`
	Nip              pgtype.Text `db:"nip"`
}

func (q *Queries) CreatePasangan(ctx context.Context, arg CreatePasanganParams) (int64, error) {
	row := q.db.QueryRow(ctx, createPasangan,
		arg.Nama,
		arg.Nik,
		arg.Pns,
		arg.TanggalLahir,
		arg.Karsus,
		arg.AgamaID,
		arg.Status,
		arg.Hubungan,
		arg.TanggalMenikah,
		arg.AkteNikah,
		arg.TanggalMeninggal,
		arg.AkteMeninggal,
		arg.TanggalCerai,
		arg.AkteCerai,
		arg.PnsID,
		arg.Nip,
	)
	var id int64
	err := row.Scan(&id)
	return id, err
}

const deleteAnak = `-- name: DeleteAnak :execrows
update anak a
set deleted_at = now()
from pegawai p
where a.pns_id = p.pns_id
    and a.id = $1 and a.deleted_at is null
    and p.nip_baru = $2 and p.deleted_at is null
`

type DeleteAnakParams struct {
	ID  int64       `db:"id"`
	Nip pgtype.Text `db:"nip"`
}

func (q *Queries) DeleteAnak(ctx context.Context, arg DeleteAnakParams) (int64, error) {
	result, err := q.db.Exec(ctx, deleteAnak, arg.ID, arg.Nip)
	if err != nil {
		return 0, err
	}
	return result.RowsAffected(), nil
}

const deleteOrangTua = `-- name: DeleteOrangTua :execrows
update orang_tua ot
set deleted_at = now()
from pegawai p
where ot.pns_id = p.pns_id
    and ot.id = $1 and ot.deleted_at is null
    and p.nip_baru = $2 and p.deleted_at is null
`

type DeleteOrangTuaParams struct {
	ID  int32       `db:"id"`
	Nip pgtype.Text `db:"nip"`
}

func (q *Queries) DeleteOrangTua(ctx context.Context, arg DeleteOrangTuaParams) (int64, error) {
	result, err := q.db.Exec(ctx, deleteOrangTua, arg.ID, arg.Nip)
	if err != nil {
		return 0, err
	}
	return result.RowsAffected(), nil
}

const deletePasangan = `-- name: DeletePasangan :execrows
update pasangan ps
set deleted_at = now()
from pegawai p
where ps.pns_id = p.pns_id
    and ps.id = $1 and ps.deleted_at is null
    and p.nip_baru = $2 and p.deleted_at is null
`

type DeletePasanganParams struct {
	ID  int64       `db:"id"`
	Nip pgtype.Text `db:"nip"`
}

func (q *Queries) DeletePasangan(ctx context.Context, arg DeletePasanganParams) (int64, error) {
	result, err := q.db.Exec(ctx, deletePasangan, arg.ID, arg.Nip)
	if err != nil {
		return 0, err
	}
	return result.RowsAffected(), nil
}

const isPasanganExistsByIDAndNIP = `-- name: IsPasanganExistsByIDAndNIP :one
select exists (
  select 1 from pasangan ps
  join pegawai p on p.pns_id = ps.pns_id and p.deleted_at is null
  where ps.id = $1 and p.nip_baru = $2 and ps.deleted_at is null
)
`

type IsPasanganExistsByIDAndNIPParams struct {
	ID      int64       `db:"id"`
	NipBaru pgtype.Text `db:"nip_baru"`
}

func (q *Queries) IsPasanganExistsByIDAndNIP(ctx context.Context, arg IsPasanganExistsByIDAndNIPParams) (bool, error) {
	row := q.db.QueryRow(ctx, isPasanganExistsByIDAndNIP, arg.ID, arg.NipBaru)
	var exists bool
	err := row.Scan(&exists)
	return exists, err
}

const listAnakByNip = `-- name: ListAnakByNip :many
SELECT
    a.id,
    a.pasangan_id,
    a.nama,
    a.jenis_kelamin,
    a.tanggal_lahir,
    a.status_anak,
    pas.nama AS nama_orang_tua,
    a.nik,
    a.agama_id,
    ra.nama as agama,
    a.jenis_kawin_id,
    rjk.nama as status_pernikahan,
    a.status_sekolah,
    a.anak_ke
FROM anak a
JOIN pegawai pg ON a.pns_id = pg.pns_id AND pg.deleted_at is null
LEFT JOIN pasangan pas ON a.pasangan_id = pas.id AND pas.deleted_at is null
LEFT JOIN ref_agama ra ON a.agama_id = ra.id AND ra.deleted_at is null
LEFT JOIN ref_jenis_kawin rjk ON a.jenis_kawin_id = rjk.id AND rjk.deleted_at is null
WHERE a.deleted_at IS NULL
AND pg.nip_baru = $1
ORDER BY a.anak_ke NULLS LAST, a.tanggal_lahir NULLS LAST
`

type ListAnakByNipRow struct {
	ID               int64       `db:"id"`
	PasanganID       pgtype.Int8 `db:"pasangan_id"`
	Nama             pgtype.Text `db:"nama"`
	JenisKelamin     pgtype.Text `db:"jenis_kelamin"`
	TanggalLahir     pgtype.Date `db:"tanggal_lahir"`
	StatusAnak       pgtype.Text `db:"status_anak"`
	NamaOrangTua     pgtype.Text `db:"nama_orang_tua"`
	Nik              pgtype.Text `db:"nik"`
	AgamaID          pgtype.Int2 `db:"agama_id"`
	Agama            pgtype.Text `db:"agama"`
	JenisKawinID     pgtype.Int2 `db:"jenis_kawin_id"`
	StatusPernikahan pgtype.Text `db:"status_pernikahan"`
	StatusSekolah    pgtype.Int2 `db:"status_sekolah"`
	AnakKe           pgtype.Int2 `db:"anak_ke"`
}

func (q *Queries) ListAnakByNip(ctx context.Context, nipBaru pgtype.Text) ([]ListAnakByNipRow, error) {
	rows, err := q.db.Query(ctx, listAnakByNip, nipBaru)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ListAnakByNipRow
	for rows.Next() {
		var i ListAnakByNipRow
		if err := rows.Scan(
			&i.ID,
			&i.PasanganID,
			&i.Nama,
			&i.JenisKelamin,
			&i.TanggalLahir,
			&i.StatusAnak,
			&i.NamaOrangTua,
			&i.Nik,
			&i.AgamaID,
			&i.Agama,
			&i.JenisKawinID,
			&i.StatusPernikahan,
			&i.StatusSekolah,
			&i.AnakKe,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listOrangTuaByNip = `-- name: ListOrangTuaByNip :many
SELECT
    ot.id,
    ot.hubungan,
    ot.nama,
    ot.tanggal_meninggal,
    ot.akte_meninggal,
    ot.no_dokumen AS nik,
    ot.agama_id,
    ra.nama AS agama
FROM orang_tua ot
JOIN pegawai pg ON ot.pns_id = pg.pns_id AND pg.deleted_at is null
LEFT JOIN ref_agama ra ON ot.agama_id = ra.id AND ra.deleted_at is null
WHERE ot.deleted_at IS NULL
AND pg.nip_baru = $1
`

type ListOrangTuaByNipRow struct {
	ID               int32       `db:"id"`
	Hubungan         pgtype.Int2 `db:"hubungan"`
	Nama             pgtype.Text `db:"nama"`
	TanggalMeninggal pgtype.Date `db:"tanggal_meninggal"`
	AkteMeninggal    pgtype.Text `db:"akte_meninggal"`
	Nik              pgtype.Text `db:"nik"`
	AgamaID          pgtype.Int2 `db:"agama_id"`
	Agama            pgtype.Text `db:"agama"`
}

func (q *Queries) ListOrangTuaByNip(ctx context.Context, nipBaru pgtype.Text) ([]ListOrangTuaByNipRow, error) {
	rows, err := q.db.Query(ctx, listOrangTuaByNip, nipBaru)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ListOrangTuaByNipRow
	for rows.Next() {
		var i ListOrangTuaByNipRow
		if err := rows.Scan(
			&i.ID,
			&i.Hubungan,
			&i.Nama,
			&i.TanggalMeninggal,
			&i.AkteMeninggal,
			&i.Nik,
			&i.AgamaID,
			&i.Agama,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const listPasanganByNip = `-- name: ListPasanganByNip :many
SELECT
    p.id,
    p.pns,
    p.nama,
    p.nik,
    p.karsus,
    p.status as status_pernikahan_id,
    rjk.nama as status_pernikahan,
    p.agama_id,
    ra.nama AS agama,
    p.tanggal_lahir,
    p.tanggal_menikah,
    p.tanggal_cerai,
    p.tanggal_meninggal,
    p.akte_nikah,
    p.akte_cerai,
    p.akte_meninggal
FROM pasangan p
JOIN pegawai pg ON p.pns_id = pg.pns_id AND pg.deleted_at is null
LEFT JOIN ref_agama ra ON p.agama_id = ra.id AND ra.deleted_at is null
LEFT JOIN ref_jenis_kawin rjk ON p.status = rjk.id AND rjk.deleted_at is null
WHERE p.deleted_at IS NULL
AND pg.nip_baru = $1
`

type ListPasanganByNipRow struct {
	ID                 int64       `db:"id"`
	Pns                pgtype.Int2 `db:"pns"`
	Nama               pgtype.Text `db:"nama"`
	Nik                pgtype.Text `db:"nik"`
	Karsus             pgtype.Text `db:"karsus"`
	StatusPernikahanID pgtype.Int2 `db:"status_pernikahan_id"`
	StatusPernikahan   pgtype.Text `db:"status_pernikahan"`
	AgamaID            pgtype.Int2 `db:"agama_id"`
	Agama              pgtype.Text `db:"agama"`
	TanggalLahir       pgtype.Date `db:"tanggal_lahir"`
	TanggalMenikah     pgtype.Date `db:"tanggal_menikah"`
	TanggalCerai       pgtype.Date `db:"tanggal_cerai"`
	TanggalMeninggal   pgtype.Date `db:"tanggal_meninggal"`
	AkteNikah          pgtype.Text `db:"akte_nikah"`
	AkteCerai          pgtype.Text `db:"akte_cerai"`
	AkteMeninggal      pgtype.Text `db:"akte_meninggal"`
}

func (q *Queries) ListPasanganByNip(ctx context.Context, nipBaru pgtype.Text) ([]ListPasanganByNipRow, error) {
	rows, err := q.db.Query(ctx, listPasanganByNip, nipBaru)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ListPasanganByNipRow
	for rows.Next() {
		var i ListPasanganByNipRow
		if err := rows.Scan(
			&i.ID,
			&i.Pns,
			&i.Nama,
			&i.Nik,
			&i.Karsus,
			&i.StatusPernikahanID,
			&i.StatusPernikahan,
			&i.AgamaID,
			&i.Agama,
			&i.TanggalLahir,
			&i.TanggalMenikah,
			&i.TanggalCerai,
			&i.TanggalMeninggal,
			&i.AkteNikah,
			&i.AkteCerai,
			&i.AkteMeninggal,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateAnak = `-- name: UpdateAnak :execrows
update anak a
set
    pasangan_id = $1,
    nama = $2,
    nik = $3,
    jenis_kelamin = $4,
    tanggal_lahir = $5,
    agama_id = $6,
    jenis_kawin_id = $7,
    status_anak = $8,
    status_sekolah = $9,
    anak_ke = $10,
    updated_at = now()
from pegawai p
where a.pns_id = p.pns_id
    and a.id = $11 and a.deleted_at is null
    and p.nip_baru = $12 and p.deleted_at is null
`

type UpdateAnakParams struct {
	PasanganID    pgtype.Int8 `db:"pasangan_id"`
	Nama          pgtype.Text `db:"nama"`
	Nik           pgtype.Text `db:"nik"`
	JenisKelamin  pgtype.Text `db:"jenis_kelamin"`
	TanggalLahir  pgtype.Date `db:"tanggal_lahir"`
	AgamaID       pgtype.Int2 `db:"agama_id"`
	JenisKawinID  pgtype.Int2 `db:"jenis_kawin_id"`
	StatusAnak    pgtype.Text `db:"status_anak"`
	StatusSekolah pgtype.Int2 `db:"status_sekolah"`
	AnakKe        pgtype.Int2 `db:"anak_ke"`
	ID            int64       `db:"id"`
	Nip           pgtype.Text `db:"nip"`
}

func (q *Queries) UpdateAnak(ctx context.Context, arg UpdateAnakParams) (int64, error) {
	result, err := q.db.Exec(ctx, updateAnak,
		arg.PasanganID,
		arg.Nama,
		arg.Nik,
		arg.JenisKelamin,
		arg.TanggalLahir,
		arg.AgamaID,
		arg.JenisKawinID,
		arg.StatusAnak,
		arg.StatusSekolah,
		arg.AnakKe,
		arg.ID,
		arg.Nip,
	)
	if err != nil {
		return 0, err
	}
	return result.RowsAffected(), nil
}

const updateOrangTua = `-- name: UpdateOrangTua :execrows
update orang_tua ot
set
    nama = $1,
    jenis_dokumen = $2,
    no_dokumen = $3,
    hubungan = $4,
    agama_id = $5,
    tanggal_meninggal = $6,
    akte_meninggal = $7,
    updated_at = now()
from pegawai p
where ot.pns_id = p.pns_id
    and ot.id = $8 and ot.deleted_at is null
    and p.nip_baru = $9 and p.deleted_at is null
`

type UpdateOrangTuaParams struct {
	Nama             pgtype.Text `db:"nama"`
	JenisDokumen     pgtype.Text `db:"jenis_dokumen"`
	NoDokumen        pgtype.Text `db:"no_dokumen"`
	Hubungan         pgtype.Int2 `db:"hubungan"`
	AgamaID          pgtype.Int2 `db:"agama_id"`
	TanggalMeninggal pgtype.Date `db:"tanggal_meninggal"`
	AkteMeninggal    pgtype.Text `db:"akte_meninggal"`
	ID               int32       `db:"id"`
	Nip              pgtype.Text `db:"nip"`
}

func (q *Queries) UpdateOrangTua(ctx context.Context, arg UpdateOrangTuaParams) (int64, error) {
	result, err := q.db.Exec(ctx, updateOrangTua,
		arg.Nama,
		arg.JenisDokumen,
		arg.NoDokumen,
		arg.Hubungan,
		arg.AgamaID,
		arg.TanggalMeninggal,
		arg.AkteMeninggal,
		arg.ID,
		arg.Nip,
	)
	if err != nil {
		return 0, err
	}
	return result.RowsAffected(), nil
}

const updatePasangan = `-- name: UpdatePasangan :execrows
update pasangan ps
set
    nama = $1,
    nik = $2,
    pns = $3,
    tanggal_lahir = $4,
    karsus = $5,
    agama_id = $6,
    status = $7,
    hubungan = $8,
    tanggal_menikah = $9,
    akte_nikah = $10,
    tanggal_meninggal = $11,
    akte_meninggal = $12,
    tanggal_cerai = $13,
    akte_cerai = $14,
    updated_at = now()
from pegawai p
where ps.pns_id = p.pns_id
    and ps.id = $15 and ps.deleted_at is null
    and p.nip_baru = $16 and p.deleted_at is null
`

type UpdatePasanganParams struct {
	Nama             pgtype.Text `db:"nama"`
	Nik              pgtype.Text `db:"nik"`
	Pns              pgtype.Int2 `db:"pns"`
	TanggalLahir     pgtype.Date `db:"tanggal_lahir"`
	Karsus           pgtype.Text `db:"karsus"`
	AgamaID          pgtype.Int2 `db:"agama_id"`
	Status           pgtype.Int2 `db:"status"`
	Hubungan         pgtype.Int2 `db:"hubungan"`
	TanggalMenikah   pgtype.Date `db:"tanggal_menikah"`
	AkteNikah        pgtype.Text `db:"akte_nikah"`
	TanggalMeninggal pgtype.Date `db:"tanggal_meninggal"`
	AkteMeninggal    pgtype.Text `db:"akte_meninggal"`
	TanggalCerai     pgtype.Date `db:"tanggal_cerai"`
	AkteCerai        pgtype.Text `db:"akte_cerai"`
	ID               int64       `db:"id"`
	Nip              pgtype.Text `db:"nip"`
}

func (q *Queries) UpdatePasangan(ctx context.Context, arg UpdatePasanganParams) (int64, error) {
	result, err := q.db.Exec(ctx, updatePasangan,
		arg.Nama,
		arg.Nik,
		arg.Pns,
		arg.TanggalLahir,
		arg.Karsus,
		arg.AgamaID,
		arg.Status,
		arg.Hubungan,
		arg.TanggalMenikah,
		arg.AkteNikah,
		arg.TanggalMeninggal,
		arg.AkteMeninggal,
		arg.TanggalCerai,
		arg.AkteCerai,
		arg.ID,
		arg.Nip,
	)
	if err != nil {
		return 0, err
	}
	return result.RowsAffected(), nil
}
