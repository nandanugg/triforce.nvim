// Code generated by sqlc. DO NOT EDIT.
// source: riwayat_penghargaan.sql

package repository

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const countRiwayatPenghargaan = `-- name: CountRiwayatPenghargaan :one
SELECT COUNT(1)
FROM riwayat_penghargaan_umum
WHERE nip = $1::varchar and riwayat_penghargaan_umum.deleted_at is null
`

func (q *Queries) CountRiwayatPenghargaan(ctx context.Context, nip string) (int64, error) {
	row := q.db.QueryRow(ctx, countRiwayatPenghargaan, nip)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const createRiwayatPenghargaan = `-- name: CreateRiwayatPenghargaan :one
insert into 
    riwayat_penghargaan_umum (nip, nama_penghargaan, jenis_penghargaan, deskripsi_penghargaan, tanggal_penghargaan) 
values 
    ($1, $2, $3, $4, $5)
returning id
`

type CreateRiwayatPenghargaanParams struct {
	Nip                  pgtype.Text `db:"nip"`
	NamaPenghargaan      pgtype.Text `db:"nama_penghargaan"`
	JenisPenghargaan     pgtype.Text `db:"jenis_penghargaan"`
	DeskripsiPenghargaan pgtype.Text `db:"deskripsi_penghargaan"`
	TanggalPenghargaan   pgtype.Date `db:"tanggal_penghargaan"`
}

func (q *Queries) CreateRiwayatPenghargaan(ctx context.Context, arg CreateRiwayatPenghargaanParams) (int32, error) {
	row := q.db.QueryRow(ctx, createRiwayatPenghargaan,
		arg.Nip,
		arg.NamaPenghargaan,
		arg.JenisPenghargaan,
		arg.DeskripsiPenghargaan,
		arg.TanggalPenghargaan,
	)
	var id int32
	err := row.Scan(&id)
	return id, err
}

const deleteRiwayatPenghargaan = `-- name: DeleteRiwayatPenghargaan :execrows
update riwayat_penghargaan_umum
set
    deleted_at = now()
where id = $1 and nip = $2::varchar and deleted_at is null
`

type DeleteRiwayatPenghargaanParams struct {
	ID  int32  `db:"id"`
	Nip string `db:"nip"`
}

func (q *Queries) DeleteRiwayatPenghargaan(ctx context.Context, arg DeleteRiwayatPenghargaanParams) (int64, error) {
	result, err := q.db.Exec(ctx, deleteRiwayatPenghargaan, arg.ID, arg.Nip)
	if err != nil {
		return 0, err
	}
	return result.RowsAffected(), nil
}

const getBerkasRiwayatPenghargaan = `-- name: GetBerkasRiwayatPenghargaan :one
SELECT file_base64
FROM riwayat_penghargaan_umum rpu
WHERE nip = $1
  AND rpu.id = $2
  AND rpu.deleted_at is null
`

type GetBerkasRiwayatPenghargaanParams struct {
	Nip pgtype.Text `db:"nip"`
	ID  int32       `db:"id"`
}

func (q *Queries) GetBerkasRiwayatPenghargaan(ctx context.Context, arg GetBerkasRiwayatPenghargaanParams) (pgtype.Text, error) {
	row := q.db.QueryRow(ctx, getBerkasRiwayatPenghargaan, arg.Nip, arg.ID)
	var file_base64 pgtype.Text
	err := row.Scan(&file_base64)
	return file_base64, err
}

const getRiwayatPenghargaan = `-- name: GetRiwayatPenghargaan :one
SELECT
    id,
    jenis_penghargaan,
    nama_penghargaan,
    deskripsi_penghargaan,
    tanggal_penghargaan
FROM riwayat_penghargaan_umum
WHERE nip = $1::varchar
  AND id = $2
  AND deleted_at is null
`

type GetRiwayatPenghargaanParams struct {
	Nip string `db:"nip"`
	ID  int32  `db:"id"`
}

type GetRiwayatPenghargaanRow struct {
	ID                   int32       `db:"id"`
	JenisPenghargaan     pgtype.Text `db:"jenis_penghargaan"`
	NamaPenghargaan      pgtype.Text `db:"nama_penghargaan"`
	DeskripsiPenghargaan pgtype.Text `db:"deskripsi_penghargaan"`
	TanggalPenghargaan   pgtype.Date `db:"tanggal_penghargaan"`
}

func (q *Queries) GetRiwayatPenghargaan(ctx context.Context, arg GetRiwayatPenghargaanParams) (GetRiwayatPenghargaanRow, error) {
	row := q.db.QueryRow(ctx, getRiwayatPenghargaan, arg.Nip, arg.ID)
	var i GetRiwayatPenghargaanRow
	err := row.Scan(
		&i.ID,
		&i.JenisPenghargaan,
		&i.NamaPenghargaan,
		&i.DeskripsiPenghargaan,
		&i.TanggalPenghargaan,
	)
	return i, err
}

const listRiwayatPenghargaan = `-- name: ListRiwayatPenghargaan :many
SELECT
    id,
    jenis_penghargaan,
    nama_penghargaan,
    deskripsi_penghargaan,
    tanggal_penghargaan
FROM riwayat_penghargaan_umum
WHERE nip = $3::varchar and riwayat_penghargaan_umum.deleted_at is null
ORDER BY tanggal_penghargaan DESC NULLS LAST
LIMIT $1 OFFSET $2
`

type ListRiwayatPenghargaanParams struct {
	Limit  int32  `db:"limit"`
	Offset int32  `db:"offset"`
	Nip    string `db:"nip"`
}

type ListRiwayatPenghargaanRow struct {
	ID                   int32       `db:"id"`
	JenisPenghargaan     pgtype.Text `db:"jenis_penghargaan"`
	NamaPenghargaan      pgtype.Text `db:"nama_penghargaan"`
	DeskripsiPenghargaan pgtype.Text `db:"deskripsi_penghargaan"`
	TanggalPenghargaan   pgtype.Date `db:"tanggal_penghargaan"`
}

func (q *Queries) ListRiwayatPenghargaan(ctx context.Context, arg ListRiwayatPenghargaanParams) ([]ListRiwayatPenghargaanRow, error) {
	rows, err := q.db.Query(ctx, listRiwayatPenghargaan, arg.Limit, arg.Offset, arg.Nip)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ListRiwayatPenghargaanRow
	for rows.Next() {
		var i ListRiwayatPenghargaanRow
		if err := rows.Scan(
			&i.ID,
			&i.JenisPenghargaan,
			&i.NamaPenghargaan,
			&i.DeskripsiPenghargaan,
			&i.TanggalPenghargaan,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateRiwayatPenghargaan = `-- name: UpdateRiwayatPenghargaan :execrows
update riwayat_penghargaan_umum
set
    nip = $2,
    nama_penghargaan = $3,
    jenis_penghargaan = $4,
    deskripsi_penghargaan = $5,
    tanggal_penghargaan = $6,
    updated_at = now()
where id = $1 AND deleted_at IS NULL
`

type UpdateRiwayatPenghargaanParams struct {
	ID                   int32       `db:"id"`
	Nip                  pgtype.Text `db:"nip"`
	NamaPenghargaan      pgtype.Text `db:"nama_penghargaan"`
	JenisPenghargaan     pgtype.Text `db:"jenis_penghargaan"`
	DeskripsiPenghargaan pgtype.Text `db:"deskripsi_penghargaan"`
	TanggalPenghargaan   pgtype.Date `db:"tanggal_penghargaan"`
}

func (q *Queries) UpdateRiwayatPenghargaan(ctx context.Context, arg UpdateRiwayatPenghargaanParams) (int64, error) {
	result, err := q.db.Exec(ctx, updateRiwayatPenghargaan,
		arg.ID,
		arg.Nip,
		arg.NamaPenghargaan,
		arg.JenisPenghargaan,
		arg.DeskripsiPenghargaan,
		arg.TanggalPenghargaan,
	)
	if err != nil {
		return 0, err
	}
	return result.RowsAffected(), nil
}

const updateRiwayatPenghargaanBerkas = `-- name: UpdateRiwayatPenghargaanBerkas :execrows
update riwayat_penghargaan_umum
set
    file_base64 = $1,
    updated_at = now()
where id = $2 AND nip = $3::varchar AND riwayat_penghargaan_umum.deleted_at IS NULL
`

type UpdateRiwayatPenghargaanBerkasParams struct {
	FileBase64 pgtype.Text `db:"file_base64"`
	ID         int32       `db:"id"`
	Nip        string      `db:"nip"`
}

func (q *Queries) UpdateRiwayatPenghargaanBerkas(ctx context.Context, arg UpdateRiwayatPenghargaanBerkasParams) (int64, error) {
	result, err := q.db.Exec(ctx, updateRiwayatPenghargaanBerkas, arg.FileBase64, arg.ID, arg.Nip)
	if err != nil {
		return 0, err
	}
	return result.RowsAffected(), nil
}

const updateRiwayatPenghargaanNamaNipByNIP = `-- name: UpdateRiwayatPenghargaanNamaNipByNIP :exec
UPDATE riwayat_penghargaan_umum
SET     
    nip = $1::varchar,
    updated_at = now()
WHERE nip = $2::varchar AND deleted_at IS NULL
AND (
    ($1::varchar IS NOT NULL AND $1::varchar IS DISTINCT FROM nip)
)
`

type UpdateRiwayatPenghargaanNamaNipByNIPParams struct {
	NipBaru string `db:"nip_baru"`
	Nip     string `db:"nip"`
}

func (q *Queries) UpdateRiwayatPenghargaanNamaNipByNIP(ctx context.Context, arg UpdateRiwayatPenghargaanNamaNipByNIPParams) error {
	_, err := q.db.Exec(ctx, updateRiwayatPenghargaanNamaNipByNIP, arg.NipBaru, arg.Nip)
	return err
}
